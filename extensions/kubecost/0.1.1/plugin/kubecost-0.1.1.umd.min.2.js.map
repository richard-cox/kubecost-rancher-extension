{"version":3,"sources":["webpack://kubecost-0.1.1/./components/NamespaceTab.vue?b754","webpack://kubecost-0.1.1/./components/NamespaceTab.vue?751c","webpack://kubecost-0.1.1/./components/NamespaceTab.vue?e4c3","webpack://kubecost-0.1.1/./components/NamespaceTab.vue","webpack://kubecost-0.1.1/components/NamespaceTab.vue","webpack://kubecost-0.1.1/./components/NamespaceTab.vue?80d0","webpack://kubecost-0.1.1/./components/NamespaceTab.vue?8dda"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_c","_self","staticClass","$fetchState","pending","attrs","_v","_s","t","costs","_l","cost","key","name","value","staticRenderFns","components","Loading","LabelValue","props","resource","type","Object","required","targetNamespace","id","prefix","clusterId","namespace","service","path","url","res","$store","dispatch","redirectUnauthorized","code","_res$data","model","data","cpuCost","toFixed","ramCost","pvCost","gpuCost","networkCost","lbCost","loadBalancerCost","totalCost","entries","map","watch","computed","mapGetters","methods","component"],"mappings":"gLAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,QAE5C,IAAIE,EAAM,EAAQ,QAAkEL,QACvEK,EAAI,WAAYP,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCR5E,IAAIQ,EAA8B,EAAQ,QAC1CF,EAAUE,GAA4B,GAEtCF,EAAQG,KAAK,CAACN,EAAOC,EAAI,wLAA2L,KAEpND,EAAOG,QAAUA,G,kCCNjB,W,yCCAA,IAAII,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAAEJ,EAAIK,YAAYC,QAASJ,EAAG,UAAU,CAACK,MAAM,CAAC,KAAO,cAAcL,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,EAAE,mCAAqCV,EAAIW,MAAgFT,EAAG,MAAM,CAACE,YAAY,gBAAgBJ,EAAIY,GAAIZ,EAAIW,OAAO,SAASE,GAAM,OAAOX,EAAG,aAAa,CAACY,IAAID,EAAKE,KAAKX,YAAY,cAAcG,MAAM,CAAC,KAAOM,EAAKE,KAAK,MAAQF,EAAKG,YAAW,GAAjQd,EAAG,IAAI,CAACF,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIU,EAAE,kCAAkC,UAAqM,IAEhgBO,EAAkB,G,oCCGP,GACfF,KAAA,uBAEAG,WAAA,CAAAC,eAAAC,mBAEAC,MAAA,CACAC,SAAA,CACAC,KAAAC,OACAC,UAAA,IAIA,cAIA,MAAAC,EAAA,KAAAJ,SAAAK,GACAC,EAAA,sBAAAC,UACAC,EAAA,WACAC,EAAA,wCACAC,EAAA,iEAEAC,EAAA,GAAAL,uBAAAE,cAAAC,WAAAC,IAEAE,QAAA,KAAAC,OAAAC,SAAA,mBAAAH,MAAAI,sBAAA,IAGA,SAAAH,EAAAI,KAAA,KAAAC,EACA,MAAAC,EAAA,QAAAD,EAAAL,EAAAO,YAAA,IAAAF,OAAA,EAAAA,EAAA,GAAAb,GAEA,GAAAc,EAAA,CACA,MAAA7B,EAAA,CACA+B,QAAAF,EAAAE,QAAAC,QAAA,GACAC,QAAAJ,EAAAI,QAAAD,QAAA,GACAE,OAAAL,EAAAK,OAAAF,QAAA,GACAG,QAAAN,EAAAM,QAAAH,QAAA,GACAI,YAAAP,EAAAO,YAAAJ,QAAA,GACAK,OAAAR,EAAAS,iBAAAN,QAAA,GACAO,UAAAV,EAAAU,UAAAP,QAAA,IAGA,KAAAhC,MAAAa,OAAA2B,QAAAxC,GAAAyC,IAAA,EAAAtC,EAAAE,MAAA,CAAAD,KAAA,KAAAL,EAAA,+BAAAI,GAAAE,MAAA,IAAAA,UAEA,KAAAL,MAAA,OAKA8B,OACA,OAAA9B,MAAA,KAGA0C,MAAA,GAEAC,SAAA,IAAAC,eAAA,gBAEAC,QAAA,IC7DmY,I,wBCQ/XC,EAAY,eACd,EACA1D,EACAkB,GACA,EACA,KACA,WACA,MAIa,aAAAwC,E","file":"kubecost-0.1.1.umd.min.2.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NamespaceTab.vue?vue&type=style&index=0&id=000b29f5&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2e294faa\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".main[data-v-000b29f5]{position:\\\"relative\\\"}.main .label-values[data-v-000b29f5]{display:flex;flex-direction:row}.main .label-values .label-value[data-v-000b29f5]{padding-right:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NamespaceTab.vue?vue&type=style&index=0&id=000b29f5&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[(_vm.$fetchState.pending)?_c('Loading',{attrs:{\"mode\":\"relative\"}}):_c('div',[_c('h3',[_vm._v(_vm._s(_vm.t('kubecost.namespaceTab.title')))]),(!_vm.costs)?_c('p',[_vm._v(\" \"+_vm._s(_vm.t('kubecost.namespaceTab.noCosts'))+\" \")]):_c('div',{staticClass:\"label-values\"},_vm._l((_vm.costs),function(cost){return _c('LabelValue',{key:cost.name,staticClass:\"label-value\",attrs:{\"name\":cost.name,\"value\":cost.value}})}),1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading';\nimport LabelValue from '@shell/components/LabelValue';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'KubecostNamespaceTab',\n\n  components: { Loading, LabelValue },\n\n  props: {\n    resource: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    // Production Note - This does not check if the cluster has kubecost installed. That should be achievable by fetching installed helm\n    // apps. This might also reveal which namespace the chart is installed to\n\n    const targetNamespace = this.resource.id;\n    const prefix = `/k8s/clusters/${ this.clusterId }`;\n    const namespace = 'kubecost'; // Production Note - This could be any namespace the user decided to install kubecost to\n    const service = 'http:cost-analyzer-cost-analyzer:9090'; // Production Note - Brittle. In theory this could change?\n    const path = 'model/allocation?window=1d&aggregate=namespace&accumulate=true'; // Production Note - this will fetch allll namespaces, guessing there's a param to limit to one\n\n    const url = `${ prefix }/api/v1/namespaces/${ namespace }/services/${ service }/proxy/${ path }`;\n\n    const res = await this.$store.dispatch('cluster/request', { url, redirectUnauthorized: false });\n\n    // Production Note - There's no error handling here\n    if (res.code === 200) {\n      const model = res.data?.[0][targetNamespace];\n\n      if (model) {\n        const costs = {\n          cpuCost:     model.cpuCost.toFixed(2),\n          ramCost:     model.ramCost.toFixed(2),\n          pvCost:      model.pvCost.toFixed(2),\n          gpuCost:     model.gpuCost.toFixed(2),\n          networkCost: model.networkCost.toFixed(2),\n          lbCost:      model.loadBalancerCost.toFixed(2),\n          totalCost:   model.totalCost.toFixed(2),\n        };\n\n        this.costs = Object.entries(costs).map(([key, value]) => ({ name: this.t(`kubecost.namespaceTab.costs.${ key }`), value: `$${ value }` }));\n      } else {\n        this.costs = null;\n      }\n    }\n  },\n\n  data() {\n    return { costs: {} };\n  },\n\n  watch: {},\n\n  computed: { ...mapGetters(['clusterId']) },\n\n  methods: {}\n};\n</script>\n\n<template>\n  <div class=\"main\">\n    <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n    <div v-else>\n      <h3>{{ t('kubecost.namespaceTab.title') }}</h3>\n      <p v-if=\"!costs\">\n        {{ t('kubecost.namespaceTab.noCosts') }}\n      </p>\n      <div\n        v-else\n        class=\"label-values\"\n      >\n        <LabelValue\n          v-for=\"cost of costs\"\n          :key=\"cost.name\"\n          class=\"label-value\"\n          :name=\"cost.name\"\n          :value=\"cost.value\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.main {\n  position:'relative';\n\n  .label-values {\n    display: flex;\n    flex-direction: row;\n    .label-value {\n      padding-right: 20px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NamespaceTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NamespaceTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NamespaceTab.vue?vue&type=template&id=000b29f5&scoped=true&\"\nimport script from \"./NamespaceTab.vue?vue&type=script&lang=js&\"\nexport * from \"./NamespaceTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NamespaceTab.vue?vue&type=style&index=0&id=000b29f5&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"000b29f5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}